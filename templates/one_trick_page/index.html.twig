{% extends 'base.html.twig' %}

{% block title %} {{ trick.trickname }} {% endblock %}

{% block body %}
    <div class="position-relative">
        <img src="{{ trick.images.first.url }}" alt="" id="mainPic">
        <p class="position-absolute" style="bottom: 50%; left: 40%;" id="oneTrickName">{{ trick.trickname }}</p>
        <div id="userUpdateDeleteBlock">
            <a href="{{ path('updateTrick', {'id': trick.id}) }}"><img src="{{ asset('Images/pencil.png') }}"
                                                                       alt=""></a>
            <a href="{{ path('deleteTrick', {'id': trick.id}) }}"><img src="{{ asset('Images/Trash.png') }}" alt=""></a>
        </div>
    </div>

    <div class="row">
        {% for image in trick.images %}

            {% if loop.first %}

            {% else %}

                <div class="col-lg-2">
                    <img src="{{ image.url }}" alt="" class="col-lg-12" id="OneTrickPics">
                </div>

            {% endif %}

        {% endfor %}



        {% for video in trick.videos %}

            <div class="col-lg-2">
                <iframe src="{{ video.url }}" frameborder="0" class="col-lg-12" id="OneTrickVids"></iframe>
            </div>
        {% endfor %}

    </div>

    <div class="row">
        <div class="col-lg-1"></div>
        <div class="col-lg-10 text-center">
            <p>{{ trick.description }}</p>
        </div>
        <div class="col-lg-1"></div>
    </div>

    <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6 row">
            <div class="col-lg-4 text-center">
                <p id="infoTrick">Créé le {{ trick.createdAt | date('d/m/Y') }}</p>
            </div>
            <div class="col-lg-4 text-center">
                <p id="infoTrick">Catégorie : {{ trick.category.title }}</p>
            </div>
            <div class="col-lg-4 text-center">
                <p id="infoTrick">Mis à jour le {{ trick.updatedAt | date('d/m/Y') }}</p>
            </div>
        </div>
        <div class="col-lg-3"></div>
    </div>

    <div class="row">
        <div class="col-lg-2"></div>
        <div class="col-lg-8">
            <hr>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-2"></div>
        <div class="col-lg-8">
            <div class="row">
                {% if is_granted('ROLE_USER') %}
                <div class="col-lg-12">

                    {{ form_start(commentForm) }}

                    {{ form_row(commentForm) }}

                    <input type="submit" class="btn" value="Create"/>

                    {{ form_end(commentForm) }}
                </div>
                {% endif %}
            </div>
            <div class="col-lg-2"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-2"></div>
        <div class="col-lg-8">
            <hr>
        </div>
        <div class="col-lg-2"></div>
    </div>

    <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
            {% for comment in trick.comments %}

                <div class="col-lg-12" id="blockComment">
                    <p>De {{ comment.user.firstName }} {{ comment.user.lastName }} le {{ comment.createdAt | date('d/m/Y') }}</p>
                    <p>{{ comment.content }}</p>
                </div>

            {% endfor %}
        </div>
    </div>
{% endblock %}
